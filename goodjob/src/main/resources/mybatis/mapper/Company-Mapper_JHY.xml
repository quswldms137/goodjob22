<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="com.example.goodjob.dao.ICompanyDao_JHY">
	<!-- 내가 쓴 채용공고 목록 조회하기 (지금은 로그인 연동 X -> 등록된 채용공고 전부다 불러옴)-->
	<select id="findAll">
		select * from recruit
	</select>
	<!-- 내가 쓴 채용공고 목록 조회하기 -->
	<select id="findByCom_no">
		SELECT title, career, education, location, RANK, pay, DATEDIFF(deadline_date, NOW()) 'deadline_date' from recruit
	</select>
	<!-- 제일 최근에 등록한 채용공고 조회 -->
	<select id="findLatest">
		select * from recruit where com_no = #{com_no} order by reg_date desc
	</select>
	<!-- 채용공고에 등록된 요구스킬 조회 -->
	<select id="findSkillListByRecruit_no">
		select skill_name from c_skill where recruit_no = #{recruit_no}
	</select>
	<!-- 채용공고 번호로 특정 채용공고 정보 조회 -->
	<select id="findByRecruit_no">
		select * from recruit where recruit_no = #{recruit_no}
	</select>
	
	<!-- 채용공고 등록하기 -->
	<insert id="recruitWrite">
		insert into recruit values (null, #{recruit.com_no}, #{recruit.career}, #{recruit.education}, 
									#{recruit.field}, #{recruit.pay}, #{recruit.location}, #{recruit.working_time}, 
									#{recruit.rank}, #{recruit.title}, #{recruit.qualification}, #{recruit.welfare}, 
									#{recruit.seprocedure}, #{recruit.notice}, now(), 
									#{recruit.deadline_date}, #{recruit.p_number}, #{recruit.recruit_intro})
	</insert>
	<!-- 채용공고 요구 스킬 등록 -->
	<insert id="regSkill">
		insert into c_skill values (null, #{recruit_no}, #{skill})
	</insert>
	
	<!-- 채용공고 수정하기 -->
	<update id="updateRecruit">
		update recruit set career = #{recruit.career}, education = #{recruit.education}, 
							field = #{recruit.field}, pay = #{recruit.pay}, location = #{recruit.location}, 
							working_time = '${recruit.working_time}', rank = #{recruit.rank}, 
							title = #{recruit.title}, qualification = #{recruit.qualification}, 
							welfare = #{recruit.welfare}, seprocedure = #{recruit.seprocedure}, 
							notice = #{recruit.notice}, deadline_date = #{recruit.deadline_date}, 
							p_number = #{recruit.p_number}, recruit_intro = #{recruit.recruit_intro} 
							where recruit_no = #{recruit.recruit_no}
	</update>
	
	
	
	<!-- 특정 채용공고 삭제 -->
	<delete id="delete">
		delete from recruit where recruit_no = #{recruit_no}
	</delete>
	
</mapper>  